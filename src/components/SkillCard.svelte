<script context="module">
  const chips = [
    "cost",
    "power",
  ];
</script>
<script>
  import { slide } from 'svelte/transition'
  export let skill;
  export let level = undefined;

  let open = false

</script>


<div
  class="
    relative
    rounded-lg
    border
    border-gray-300
    bg-white
    px-3
    py-2
    shadow-sm
    flex
    items-center
    space-x-3
    hover:border-gray-400
    focus-within:ring-2
    focus-within:ring-offset-2
    focus-within:ring-indigo-500
  "
>
  <div class="flex-shrink-0 relative">
    {#if skill.type === "physical"}
    <svg
      aria-hidden="true"
      focusable="false"
      class="absolute w-4 h-4 bottom-0 right-0 text-gray-600 opacity-60"
      role="img"
      viewBox="0 0 384 512">
      <path
        fill="currentColor"
        d="M255.98 160V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v146.93c5.02-1.78 10.34-2.93 15.97-2.93h48.03zm128 95.99c-.01-35.34-28.66-63.99-63.99-63.99H207.85c-8.78 0-15.9 7.07-15.9 15.85v.56c0 26.27 21.3 47.59 47.57 47.59h35.26c9.68 0 13.2 3.58 13.2 8v16.2c0 4.29-3.59 7.78-7.88 8-44.52 2.28-64.16 24.71-96.05 72.55l-6.31 9.47a7.994 7.994 0 0 1-11.09 2.22l-13.31-8.88a7.994 7.994 0 0 1-2.22-11.09l6.31-9.47c15.73-23.6 30.2-43.26 47.31-58.08-17.27-5.51-31.4-18.12-38.87-34.45-6.59 3.41-13.96 5.52-21.87 5.52h-32c-12.34 0-23.49-4.81-32-12.48C71.48 251.19 60.33 256 48 256H16c-5.64 0-10.97-1.15-16-2.95v77.93c0 33.95 13.48 66.5 37.49 90.51L63.99 448v64h255.98v-63.96l35.91-35.92A96.035 96.035 0 0 0 384 344.21l-.02-88.22zm-32.01-90.09V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v112h32c11.28 0 21.94 2.31 32 5.9zM16 224h32c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v128c0 8.84 7.16 16 16 16zm95.99 0h32c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v160c0 8.84 7.16 16 16 16z">
      </path>
    </svg>
    {:else if skill.type === "magic"}
    <svg
      aria-hidden="true"
      focusable="false"
      class="h-4 w-4 opacity-60 text-gray-600 absolute  bottom-0 right-0"
      role="img"
      viewBox="0 0 512 512">
      <path
        fill="currentColor"
        d="M496 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zm-304-64l-64-32 64-32 32-64 32 64 64 32-64 32-16 32h208l-86.41-201.63a63.955 63.955 0 0 1-1.89-45.45L416 0 228.42 107.19a127.989 127.989 0 0 0-53.46 59.15L64 416h144l-16-32zm64-224l16-32 16 32 32 16-32 16-16 32-16-32-32-16 32-16z">
      </path>
    </svg>
    {/if}
    <img class="h-10 w-10" src="/{skill.icon}" alt="skill tyoe">
  </div>
  <div class="flex-1 min-w-0">
    <button on:click="{() => open = !open}" class="block focus:outline-none transition-height duration-100 w-full">
      <p class="font-medium text-gray-900 flex items-center justify-between">
        <span>{skill.name}</span>
      {#if level !== undefined}
        <span class="text-xs">LVL {level}</span>
      {/if}
      </p>
      <div class="mt-1 flex space-x-2">
      {#each chips as chip}
        <span class="inline-flex items-center flex-1">
          <span class="px-2 py-0.5 inline-flex items-center justify-center rounded-l-lg text-xs font-medium bg-gray-500 text-gray-100 uppercase h-full">
            {chip}
          </span>
          <span class="px-2 py-0.5 inline-flex items-center justify-center rounded-r-lg text-xs font-semibold tracking-wider bg-gray-300 text-gray-800 h-full flex-1">
            {skill[chip]}
          </span>
        </span>
      {/each}
      </div>
    </button>
    {#if open}
      <p transition:slide>{skill.description}</p>
    {/if}
  </div>
</div>
